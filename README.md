# SMLN-SERVER

## Введение

*Handshaker* - веб-сервер для обмена сообщениями в локальной сети по протоколу *[SMLN](https://github.com/TimurTimergalin/SMLN-protocol)*



## Настройка

Перед запуском необходимо сделать следующее:

* Сгенерировать *ssl* сертификат и ключ (файлы *.cert* и *.key*)  и указать путь к ним в *docker-compose.yml*  

Так же возможна дополнительная настройка:

* Указать пользовательский путь к конфигурационному файлу сервера. Для этого нужно указать путь к файлу в *Dockerfile*

* Изменение пароля и логина для базы данных (изменить пароль и логин в трех файлах: *docker-compose.yml*,    *example_conf.yaml*, *init-mongo.js* )

* Изменение портов сервера и бэкенда: 

  по умолчанию сервер поднимается по *ws://localhost:8081* *и   wss://localhost:444* Чтобы изменить порт *ws* поменяйте их в *docker-compose.*  В $server$ поменять порты на необходимые, затем эти же порты записать в *nginx.conf* в разделе *upstream websocket* заменить порт в директиве *server* на тот же. Для того чтобы изменить порт для *wss,* поменяйте в *docker-compose*  *nginx* на нужные, затем запишите их в *nginx.conf* в переменную *listen*

  Для базы данных достаточно изменить порты в *docker-compose* в разделе *db*

##  Запуск

 Запустить *docker*. В файле с *docker-compose.yml*  в командной строку прописать:

```docker-compose ud -d```



## Поддержка

Для добавления новых пользователей можно пользоваться скрипт командной строки: 

 ```admin_mongo_db.py "path_to_server_config" create_user```